# 类巫师 RPG 游戏开发计划

## 概述

一款以《巫师》系列为灵感的黑暗奇幻 RPG，玩家扮演一名怪物猎手，在道德灰色的世界中做出抉择，运用炼金术与战斗系统，探索丰富的世界观与传说。

**暂定名称：** 《灰烬契约》
**引擎：** 待定（见技术栈章节）
**目标平台：** Web 浏览器（后期可打包为桌面端）

---

## 核心设计理念

1. **道德模糊** — 没有绝对的善与恶，每一个选择都有代价。
2. **猎人节奏** — 调查、准备、猎杀。战斗讲究策略，而非无脑连击。
3. **深厚世界观** — 怪物图鉴、历史背景、派系政治。
4. **选择有意义** — 对话分支影响世界状态，NPC 记得你做过什么。

---

## 技术栈方案

### 方案 A — Web 端（推荐 MVP 首选）
- **运行时：** 浏览器（TypeScript）
- **游戏框架：** [Phaser 3](https://phaser.io/) — 成熟的 2D 游戏引擎
- **UI 层：** React（叠加在 Canvas 上，用于菜单、对话、背包）
- **状态管理：** Zustand 或 Redux
- **构建工具：** Vite
- **对话系统：** 自定义 JSON 驱动的对话树（兼容 Ink 格式）
- **存档系统：** LocalStorage → 后期升级为 IndexedDB

### 方案 B — Bevy（Rust）
- 本地已有 bevy 项目可参考
- 性能更强，原生桌面支持
- Web 部署需编译为 WASM，复杂度较高

**建议：** MVP 阶段优先选方案 A（Phaser 3），迭代最快；如有性能瓶颈再考虑迁移至 Bevy。

---

## 游戏系统（MVP 范围）

### 1. 世界与地图
- 俯视角 2D 瓦片地图（兼容 Tiled 编辑器）
- 多个场景区域：村庄、森林、废墟、沼泽
- 昼夜循环，影响怪物刷新与 NPC 行为

### 2. 玩家角色——猎者
- 属性：生命力、耐力、身法、印记之力、炼金
- 装备栏：武器（银/钢）、护甲、饰品
- 技能树：战斗 / 印记 / 炼金（三路互斥升级）

### 3. 战斗系统
- 即时战斗 + 暂停（半策略）
- 轻/重攻击、闪避/格挡
- 五大印记（可升级）：
  - 伊格尼（火焰喷射）、阿尔德（念动冲击）、魁恩（护盾）、阿克西（精神控制）、伊尔顿（陷阱）
- 怪物弱点系统——用错武器/涂油效果大减
- 耐力限制行动（禁止无脑连招）

### 4. 炼金系统
- 在野外采集草药、收集怪物材料
- 调制药水（临时增益）、涂油（武器附魔）、炸弹
- 毒性值系统——药水喝多了会有负面效果
- 配方通过探索、NPC 对话解锁

### 5. 怪物图鉴
- MVP 收录约 15 种怪物（狼群、溺亡者、幽灵、石像鬼等）
- 解锁途径：战斗、研究、NPC 对话
- 每条记录包含：世界观描述、弱点、推荐应对方式

### 6. 任务与对话系统
- 主线剧情（三幕，约 10 个任务）
- 支线委托（从布告栏接取的怪物猎杀任务）
- JSON 驱动的分支对话树
- 选择标志存入世界状态——NPC 会记住你的行为
- 道德模糊的结局（没有"最优解"）

### 7. 经济系统
- 委托奖励、拾取战利品、出售怪物材料获得金币
- 商人库存有限，定期补货
- 材料有重量/携带上限

### 8. 存档系统
- 多存档槽位
- 场景切换时自动存档
- "新游戏+"模式（保留炼金配方，不保留装备）

---

## 里程碑计划

### M0 — 原型验证（第 1-2 周）
- [ ] 项目脚手架（Vite + Phaser 3 + TypeScript）
- [ ] 瓦片地图渲染 + 摄像机跟随
- [ ] 玩家移动与基础碰撞
- [ ] 简单战斗循环（攻击、闪避、敌人 AI）
- [ ] 一个测试场景

### M1 — 核心循环（第 3-5 周）
- [ ] 玩家属性与升级系统
- [ ] 3 种敌人类型及 AI
- [ ] 基础背包与装备系统
- [ ] 印记系统（至少 2 个可用）
- [ ] 炼金原型（调制 3 种药水）
- [ ] 简单对话系统（含一段分支对话）

### M2 — 世界与内容（第 6-9 周）
- [ ] 3 个场景（村庄、森林、地下城）
- [ ] 昼夜循环
- [ ] 5 个支线委托
- [ ] 8 条怪物图鉴
- [ ] 布告栏任务系统
- [ ] 完整炼金系统

### M3 — 主线剧情（第 10-14 周）
- [ ] 三幕主线任务链
- [ ] 重大道德抉择及其世界影响
- [ ] 基础派系系统
- [ ] 完整怪物图鉴（15 种）
- [ ] UI 精打磨（菜单、HUD、地图）

### M4 — 打磨与发布（第 15-16 周）
- [ ] 音效与背景音乐
- [ ] 存档/读档系统
- [ ] 性能优化
- [ ] 无障碍选项（字体大小、色盲模式）
- [ ] 部署至 Web（Vercel / Netlify）

---

## 美术风格
- **风格：** 暗色像素艺术（16x16 或 32x32 瓦片），以灰土色调为主
- **参考：** Stoneshard、暗黑地牢、早期暗黑破坏神
- **素材来源：** MVP 阶段使用开源素材（0x72、Kenney）；后期视情况委托原创
- **UI：** 哥特式边框、羊皮纸纹理、深色衬线字体

---

## 待确认问题

1. **引擎选择** — Phaser 3（Web，快速迭代）还是 Bevy（Rust，本地已有项目）？
2. **视角** — 俯视角 2D（开发快）还是等距视角（画面更有质感）？
3. **MVP 范围** — 一个完整的单区域+委托，还是一个小型完整游戏？
4. **多人联机** — 暂不考虑，还是从架构上预留接口？
5. **商业化** — 免费开源，还是商业发布？

---

## 仓库结构（建议）

```
witcher-rpg/
├── PLAN.md              # 英文计划
├── PLAN_CN.md           # 本文档（中文版）
├── README.md
├── src/
│   ├── scenes/          # Phaser 场景（Boot、Game、UI 等）
│   ├── systems/         # 战斗、炼金、对话、任务系统
│   ├── entities/        # 玩家、敌人、NPC
│   ├── data/            # JSON 数据：任务、对话、图鉴、道具
│   ├── ui/              # React 菜单/HUD 组件
│   └── utils/
├── assets/
│   ├── tilemaps/
│   ├── sprites/
│   ├── audio/
│   └── fonts/
├── public/
└── docs/                # 设计文档、世界观圣经
```

---

*等待 Review 完成后，再开始实施。*
